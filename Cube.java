package com.newtana.rubikscube;

import android.opengl.GLES20;

import java.nio.FloatBuffer;
import java.nio.ShortBuffer;

/**
 * Created by tommy on 2015/06/19.
 */
public class Cube {
    //bufferの定義
    private FloatBuffer vertexBuffer;
    private ShortBuffer indexBuffer;
    private FloatBuffer normalBuffer;
    private short[] s = {
            0, 4, 8, 12, 16, 20, 24, 28, 32, 36,//0面
            40, 44, 48, 52, 56, 60, 64, 68, 72,//1面
            76, 80, 84, 88, 92, 96, 100, 104, 108,//2面
            112, 116, 120, 124, 128, 132, 136, 140, 144,//3面
            148, 152, 156, 160, 164, 168, 172, 176, 180,//4面
            184, 188, 192, 196, 200, 204, 208, 212, 216};//5面

    //頂点座標
    private float[] vertexs={
            1.5f,1.5f,1.5f,//P0　第0面
            1.5f,1.5f,0.5f,//P1
            0.5f,1.5f,1.5f,//P2
            0.5f,1.5f,0.5f,//P3
            0.5f,1.5f,1.5f,//P4
            0.5f,1.5f,0.5f,//P5
            -0.5f,1.5f,1.5f,//P6
            -0.5f,1.5f,0.5f,//P7
            -0.5f,1.5f,1.5f,//P8
            -0.5f,1.5f,0.5f,//P9
            -1.5f,1.5f,1.5f,//P10
            -1.5f,1.5f,0.5f,//P11
            1.5f,1.5f,0.5f,//P12
            1.5f,1.5f,-0.5f,//P13
            0.5f,1.5f,0.5f,//P14
            0.5f,1.5f,-0.5f,//P15
            0.5f,1.5f,0.5f,//P16
            0.5f,1.5f,-0.5f,//P17
            -0.5f,1.5f,0.5f,//P18
            -0.5f,1.5f,-0.5f,//P19
            -0.5f,1.5f,0.5f,//P20
            -0.5f,1.5f,-0.5f,//P21
            -1.5f,1.5f,0.5f,//P22
            -1.5f,1.5f,-0.5f,//P23
            1.5f,1.5f,-0.5f,//P24
            1.5f,1.5f,-1.5f,//P25
            0.5f,1.5f,-0.5f,//P26
            0.5f,1.5f,-1.5f,//P27
            0.5f,1.5f,-0.5f,//P28
            0.5f,1.5f,-1.5f,//P29
            -0.5f,1.5f,-0.5f,//P30
            -0.5f,1.5f,-1.5f,//P31
            -0.5f,1.5f,-0.5f,//P32
            -0.5f,1.5f,-1.5f,//P33
            -1.5f,1.5f,-0.5f,//P34
            -1.5f,1.5f,-1.5f,//P35

            -1.5f,1.5f,1.5f,//P36 第1面
            -1.5f,1.5f,0.5f,//P37
            -1.5f,0.5f,1.5f,//P38
            -1.5f,0.5f,0.5f,//P39
            -1.5f,0.5f,1.5f,//P40
            -1.5f,0.5f,0.5f,//P41
            -1.5f,-0.5f,1.5f,//P42
            -1.5f,-0.5f,0.5f,//P43
            -1.5f,-0.5f,1.5f,//P44
            -1.5f,-0.5f,0.5f,//P45
            -1.5f,-1.5f,1.5f,//P46
            -1.5f,-1.5f,0.5f,//P47
            -1.5f,1.5f,0.5f,//P48
            -1.5f,1.5f,-0.5f,//P49
            -1.5f,0.5f,0.5f,//P50
            -1.5f,0.5f,-0.5f,//P51
            -1.5f,0.5f,0.5f,//P52
            -1.5f,0.5f,-0.5f,//P53
            -1.5f,-0.5f,0.5f,//P54
            -1.5f,-0.5f,-0.5f,//P55
            -1.5f,-0.5f,0.5f,//P56
            -1.5f,-0.5f,-0.5f,//P57
            -1.5f,-1.5f,0.5f,//P58
            -1.5f,-1.5f,-0.5f,//P59
            -1.5f,1.5f,-0.5f,//P60
            -1.5f,1.5f,-1.5f,//P61
            -1.5f,0.5f,-0.5f,//P62
            -1.5f,0.5f,-1.5f,//P63
            -1.5f,0.5f,-0.5f,//P64
            -1.5f,0.5f,-1.5f,//P65
            -1.5f,-0.5f,-0.5f,//P66
            -1.5f,-0.5f,-1.5f,//P67
            -1.5f,-0.5f,-0.5f,//P68
            -1.5f,-0.5f,-1.5f,//P69
            -1.5f,-1.5f,-0.5f,//P70
            -1.5f,-1.5f,-1.5f,//P71

            -1.5f,-1.5f,1.5f,//P72　第2面
            -1.5f,-1.5f,0.5f,//P73
            -0.5f,-1.5f,1.5f,//P74
            -0.5f,-1.5f,0.5f,//P75
            -0.5f,-1.5f,1.5f,//P76
            -0.5f,-1.5f,0.5f,//P77
            0.5f,-1.5f,1.5f,//P78
            0.5f,-1.5f,0.5f,//P79
            0.5f,-1.5f,1.5f,//P80
            0.5f,-1.5f,0.5f,//P81
            1.5f,-1.5f,1.5f,//P82
            1.5f,-1.5f,0.5f,//P83
            -1.5f,-1.5f,0.5f,//P84
            -1.5f,-1.5f,-0.5f,//P85
            -0.5f,-1.5f,0.5f,//P86
            -0.5f,-1.5f,-0.5f,//P87
            -0.5f,-1.5f,0.5f,//P88
            -0.5f,-1.5f,-0.5f,//P89
            0.5f,-1.5f,0.5f,//P90
            0.5f,-1.5f,-0.5f,//P91
            0.5f,-1.5f,0.5f,//P92
            0.5f,-1.5f,-0.5f,//P93
            1.5f,-1.5f,0.5f,//P94
            1.5f,-1.5f,-0.5f,//P95
            -1.5f,-1.5f,-0.5f,//P96
            -1.5f,-1.5f,-1.5f,//P97
            -0.5f,-1.5f,-0.5f,//P98
            -0.5f,-1.5f,-1.5f,//P99
            -0.5f,-1.5f,-0.5f,//P100
            -0.5f,-1.5f,-1.5f,//P101
            0.5f,-1.5f,-0.5f,//P102
            0.5f,-1.5f,-1.5f,//P103
            0.5f,-1.5f,-0.5f,//P104
            0.5f,-1.5f,-1.5f,//P105
            1.5f,-1.5f,-0.5f,//P106
            1.5f,-1.5f,-1.5f,//P107

            1.5f,-1.5f,1.5f,//P108 第3面
            1.5f,-1.5f,0.5f,//P109
            1.5f,-0.5f,1.5f,//P110
            1.5f,-0.5f,0.5f,//P111
            1.5f,-0.5f,1.5f,//P112
            1.5f,-0.5f,0.5f,//P113
            1.5f,0.5f,1.5f,//P114
            1.5f,0.5f,0.5f,//P115
            1.5f,0.5f,1.5f,//P116
            1.5f,0.5f,0.5f,//P117
            1.5f,1.5f,1.5f,//P118
            1.5f,1.5f,0.5f,//P119
            1.5f,-1.5f,0.5f,//P120
            1.5f,-1.5f,-0.5f,//P121
            1.5f,-0.5f,0.5f,//P122
            1.5f,-0.5f,-0.5f,//P123
            1.5f,-0.5f,0.5f,//P124
            1.5f,-0.5f,-0.5f,//P125
            1.5f,0.5f,0.5f,//P126
            1.5f,0.5f,-0.5f,//P127
            1.5f,0.5f,0.5f,//P128
            1.5f,0.5f,-0.5f,//P129
            1.5f,1.5f,0.5f,//P130
            1.5f,1.5f,-0.5f,//P131
            1.5f,-1.5f,-0.5f,//P132
            1.5f,-1.5f,-1.5f,//P133
            1.5f,-0.5f,-0.5f,//P134
            1.5f,-0.5f,-1.5f,//P135
            1.5f,-0.5f,-0.5f,//P136
            1.5f,-0.5f,-1.5f,//P137
            1.5f,0.5f,-0.5f,//P138
            1.5f,0.5f,-1.5f,//P139
            1.5f,0.5f,-0.5f,//P140
            1.5f,0.5f,-1.5f,//P141
            1.5f,1.5f,-0.5f,//P142
            1.5f,1.5f,-1.5f,//P143


            1.5f,-1.5f,1.5f,//P144 第4面
            1.5f,-0.5f,1.5f,//P145
            0.5f,-1.5f,1.5f,//P146
            0.5f,-0.5f,1.5f,//P147
            0.5f,-1.5f,1.5f,//P148
            0.5f,-0.5f,1.5f,//P149
            -0.5f,-1.5f,1.5f,//P150
            -0.5f,-0.5f,1.5f,//P151
            -0.5f,-1.5f,1.5f,//P152
            -0.5f,-0.5f,1.5f,//P153
            -1.5f,-1.5f,1.5f,//P154
            -1.5f,-0.5f,1.5f,//P155
            1.5f,-0.5f,1.5f,//P156
            1.5f,0.5f,1.5f,//P157
            0.5f,-0.5f,1.5f,//P158
            0.5f,0.5f,1.5f,//P159
            0.5f,-0.5f,1.5f,//P160
            0.5f,0.5f,1.5f,//P161
            -0.5f,-0.5f,1.5f,//P162
            -0.5f,0.5f,1.5f,//P163
            -0.5f,-0.5f,1.5f,//P164
            -0.5f,0.5f,1.5f,//P165
            -1.5f,-0.5f,1.5f,//P166
            -1.5f,0.5f,1.5f,//P167
            1.5f,0.5f,1.5f,//P168
            1.5f,1.5f,1.5f,//P169
            0.5f,0.5f,1.5f,//P170
            0.5f,1.5f,1.5f,//P171
            0.5f,0.5f,1.5f,//P172
            0.5f,1.5f,1.5f,//P173
            -0.5f,0.5f,1.5f,//P174
            -0.5f,1.5f,1.5f,//P175
            -0.5f,0.5f,1.5f,//P176
            -0.5f,1.5f,1.5f,//P177
            -1.5f,0.5f,1.5f,//P178
            -1.5f,1.5f,1.5f,//P179


            -1.5f,-1.5f,-1.5f,//P180 第5面
            -1.5f,-0.5f,-1.5f,//P181
            -0.5f,-1.5f,-1.5f,//P182
            -0.5f,-0.5f,-1.5f,//P183
            -0.5f,-1.5f,-1.5f,//P184
            -0.5f,-0.5f,-1.5f,//P185
            0.5f,-1.5f,-1.5f,//P186
            0.5f,-0.5f,-1.5f,//P187
            0.5f,-1.5f,-1.5f,//P188
            0.5f,-0.5f,-1.5f,//P189
            1.5f,-1.5f,-1.5f,//P190
            1.5f,-0.5f,-1.5f,//P191
            -1.5f,-0.5f,-1.5f,//P192
            -1.5f,0.5f,-1.5f,//P193
            -0.5f,-0.5f,-1.5f,//P194
            -0.5f,0.5f,-1.5f,//P195
            -0.5f,-0.5f,-1.5f,//P196
            -0.5f,0.5f,-1.5f,//P197
            0.5f,-0.5f,-1.5f,//P198
            0.5f,0.5f,-1.5f,//P199
            0.5f,-0.5f,-1.5f,//P200
            0.5f,0.5f,-1.5f,//P201
            1.5f,-0.5f,-1.5f,//P202
            1.5f,0.5f,-1.5f,//P203
            -1.5f,0.5f,-1.5f,//P204
            -1.5f,1.5f,-1.5f,//P205
            -0.5f,0.5f,-1.5f,//P206
            -0.5f,1.5f,-1.5f,//P207
            -0.5f,0.5f,-1.5f,//P208
            -0.5f,1.5f,-1.5f,//P209
            0.5f,0.5f,-1.5f,//P210
            0.5f,1.5f,-1.5f,//P211
            0.5f,0.5f,-1.5f,//P212
            0.5f,1.5f,-1.5f,//P213
            1.5f,0.5f,-1.5f,//P214
            1.5f,1.5f,-1.5f,//P215

    };
    //頂点座標番号列
    private short[] indexs= {
            0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35, //第0面
            36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,//第1面
            72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107, //第2面
            108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,//第3面
            144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179, //第4面
            180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215//第5面
    };
    private int numIndexs = indexs.length;
    //拡頂点の法線ベクトル
    private float[] normals={
            0,1,0,  //P0 第0面
            0,1,0,  //P1
            0,1,0,  //P2
            0,1,0,  //P3
            0,1,0,  //P4
            0,1,0,  //P5
            0,1,0,  //P6
            0,1,0,  //P7
            0,1,0,  //P8
            0,1,0,  //P9
            0,1,0,  //P10
            0,1,0,  //P11
            0,1,0,  //P12
            0,1,0,  //P13
            0,1,0,  //P14
            0,1,0,  //P15
            0,1,0,  //P16
            0,1,0,  //P17
            0,1,0,  //P18
            0,1,0,  //P19
            0,1,0,  //P20
            0,1,0,  //P21
            0,1,0,  //P22
            0,1,0,  //P23
            0,1,0,  //P24
            0,1,0,  //P25
            0,1,0,  //P26
            0,1,0,  //P27
            0,1,0,  //P28
            0,1,0,  //P29
            0,1,0,  //P30
            0,1,0,  //P31
            0,1,0,  //P32
            0,1,0,  //P33
            0,1,0,  //P34
            0,1,0,  //P35

            -1,0,0,  //P36 第1面
            -1,0,0,  //P37
            -1,0,0,  //P38
            -1,0,0,  //P39
            -1,0,0,  //P40
            -1,0,0,  //P41
            -1,0,0,  //P42
            -1,0,0,  //P43
            -1,0,0,  //P44
            -1,0,0,  //P45
            -1,0,0,  //P46
            -1,0,0,  //P47
            -1,0,0,  //P48
            -1,0,0,  //P49
            -1,0,0,  //P50
            -1,0,0,  //P51
            -1,0,0,  //P52
            -1,0,0,  //P53
            -1,0,0,  //P54
            -1,0,0,  //P55
            -1,0,0,  //P56
            -1,0,0,  //P57
            -1,0,0,  //P58
            -1,0,0,  //P59
            -1,0,0,  //P60
            -1,0,0,  //P61
            -1,0,0,  //P62
            -1,0,0,  //P63
            -1,0,0,  //P64
            -1,0,0,  //P65
            -1,0,0,  //P66
            -1,0,0,  //P67
            -1,0,0,  //P68
            -1,0,0,  //P69
            -1,0,0,  //P70
            -1,0,0,  //P71


            0,-1,0,  //P72 第2面
            0,-1,0,  //P73
            0,-1,0,  //P74
            0,-1,0,  //P75
            0,-1,0,  //P76
            0,-1,0,  //P77
            0,-1,0,  //P78
            0,-1,0,  //P79
            0,-1,0,  //P80
            0,-1,0,  //P81
            0,-1,0,  //P82
            0,-1,0,  //P83
            0,-1,0,  //P84
            0,-1,0,  //P85
            0,-1,0,  //P86
            0,-1,0,  //P87
            0,-1,0,  //P88
            0,-1,0,  //P89
            0,-1,0,  //P90
            0,-1,0,  //P91
            0,-1,0,  //P92
            0,-1,0,  //P93
            0,-1,0,  //P94
            0,-1,0,  //P95
            0,-1,0,  //P96
            0,-1,0,  //P97
            0,-1,0,  //P98
            0,-1,0,  //P99
            0,-1,0,  //P8100
            0,-1,0,  //P101
            0,-1,0,  //P102
            0,-1,0,  //P103
            0,-1,0,  //P104
            0,-1,0,  //P105
            0,-1,0,  //P106
            0,-1,0,  //P107

            1,0,0,  //P108
            1,0,0,  //P109
            1,0,0,  //P110
            1,0,0,  //P111
            1,0,0,  //P112
            1,0,0,  //P113
            1,0,0,  //P114
            1,0,0,  //P115
            1,0,0,  //P116
            1,0,0,  //P117
            1,0,0,  //P118
            1,0,0,  //P119
            1,0,0,  //P120
            1,0,0,  //P121
            1,0,0,  //P122
            1,0,0,  //P123
            1,0,0,  //P124
            1,0,0,  //P125
            1,0,0,  //P126
            1,0,0,  //P127
            1,0,0,  //P128
            1,0,0,  //P129
            1,0,0,  //P130
            1,0,0,  //P131
            1,0,0,  //P132
            1,0,0,  //P133
            1,0,0,  //P134
            1,0,0,  //P135
            1,0,0,  //P136
            1,0,0,  //P137
            1,0,0,  //P138
            1,0,0,  //P139
            1,0,0,  //P140
            1,0,0,  //P141
            1,0,0,  //P142
            1,0,0,  //P143



            0,0,1,  //P144 第4面
            0,0,1,  //P145
            0,0,1,  //P146
            0,0,1,  //P147
            0,0,1,  //P148
            0,0,1,  //P149
            0,0,1,  //P150
            0,0,1,  //P151
            0,0,1,  //P152
            0,0,1,  //P153
            0,0,1,  //P154
            0,0,1,  //P155
            0,0,1,  //P156
            0,0,1,  //P157
            0,0,1,  //P158
            0,0,1,  //P159
            0,0,1,  //P160
            0,0,1,  //P161
            0,0,1,  //P162
            0,0,1,  //P163
            0,0,1,  //P164
            0,0,1,  //P165
            0,0,1,  //P166
            0,0,1,  //P167
            0,0,1,  //P168
            0,0,1,  //P169
            0,0,1,  //P170
            0,0,1,  //P171
            0,0,1,  //P172
            0,0,1,  //P173
            0,0,1,  //P174
            0,0,1,  //P175
            0,0,1,  //P176
            0,0,1,  //P177
            0,0,1,  //P178
            0,0,1,  //P179


            0,0,-1,  //P180 第5面
            0,0,-1,  //P181
            0,0,-1,  //P182
            0,0,-1,  //P183
            0,0,-1,  //P184
            0,0,-1,  //P185
            0,0,-1,  //P186
            0,0,-1,  //P187
            0,0,-1,  //P188
            0,0,-1,  //P189
            0,0,-1,  //P190
            0,0,-1,  //P191
            0,0,-1,  //P192
            0,0,-1,  //P193
            0,0,-1,  //P194
            0,0,-1,  //P195
            0,0,-1,  //P196
            0,0,-1,  //P197
            0,0,-1,  //P198
            0,0,-1,  //P199
            0,0,-1,  //P200
            0,0,-1,  //P201
            0,0,-1,  //P202
            0,0,-1,  //P203
            0,0,-1,  //P204
            0,0,-1,  //P205
            0,0,-1,  //P206
            0,0,-1,  //P207
            0,0,-1,  //P208
            0,0,-1,  //P209
            0,0,-1,  //P210
            0,0,-1,  //P211
            0,0,-1,  //P212
            0,0,-1,  //P213
            0,0,-1,  //P214
            0,0,-1  //P215

    };

    //constructor
    Cube() {
        makeCube(1f);
    }
    Cube(float r) { //r rudius of circumsphere
        makeCube(r);
    }

    public void makeCube(float r){ //r rudius of circumsphere
        int i;
        float m,mm;
        m= (float) (r/Math.sqrt(vertexs[0]*vertexs[0]+vertexs[1]*vertexs[1]+vertexs[2]*vertexs[2]));
        mm= (float) (1/Math.sqrt(normals[0]*normals[0]+normals[1]*normals[1]+normals[2]*normals[2]));
        for (i=0; i<vertexs.length; i++) {
            vertexs[i] *= m;
            normals[i] *= mm;
        }
        vertexBuffer=BufferUtil.makeFloatBuffer(vertexs);
        indexBuffer=BufferUtil.makeShortBuffer(indexs);
        normalBuffer=BufferUtil.makeFloatBuffer(normals);
    }

    public void draw(float r,float g,float b,float a, float shininess, int i) {
        //頂点点列
        GLES20.glVertexAttribPointer(GLES.positionHandle, 3,
                GLES20.GL_FLOAT, false, 0, vertexBuffer);

        //頂点での法線ベクトル
        GLES20.glVertexAttribPointer(GLES.normalHandle, 3,
                GLES20.GL_FLOAT, false, 0, normalBuffer);

        //周辺光反射
        GLES20.glUniform4f(GLES.materialAmbientHandle, r, g, b, a);

        //拡散反射
        GLES20.glUniform4f(GLES.materialDiffuseHandle, r, g, b, a);

        //鏡面反射
        GLES20.glUniform4f(GLES.materialSpecularHandle, 1f, 1f, 1f, a);
        GLES20.glUniform1f(GLES.materialShininessHandle, shininess);

        //shadingを使わない時に使う単色の設定 (r, g, b,a)
        GLES20.glUniform4f(GLES.objectColorHandle, r, g, b, a);

        //描画をシェーダに指示
        indexBuffer.position(s[i]);
        GLES20.glDrawElements(GLES20.GL_TRIANGLE_STRIP,
                4, GLES20.GL_UNSIGNED_SHORT, indexBuffer);

    }
}
